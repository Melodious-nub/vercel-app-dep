<h2 mat-dialog-title>Add tasks</h2>

<mat-dialog-content @fadeInUp class="pt-4 border-b">
    <form>
        <!-- Share Document -->
        <label class="block mb-1 text-sm font-bold">Assign task to:</label>
        <mat-radio-group class="mb-2" [(ngModel)]="assignTo" name="assignTo" color="primary">
            <mat-radio-button value="specific" class="block mb-1">Specific employee</mat-radio-button>
            <mat-radio-button value="multiple" class="block mb-1">Multiple employees</mat-radio-button>
        </mat-radio-group>

        <!-- Assigned to single value for employee -->
        <mat-form-field *ngIf="assignTo == 'specific'" appearance="outline" style="width: 100%;" class="mt-3 mb-2">
            <mat-label>Assigned to (specific)</mat-label>
            <mat-select [(ngModel)]="selectedValue" name="selectedValue" (selectionChange)="updateAssignedValue()">
                <mat-option *ngFor="let emp of employees" [value]="emp.id">
                    {{ emp.name }}
                </mat-option>
            </mat-select>
        </mat-form-field>

        <!-- Assigned to multiple employees -->
        <mat-form-field *ngIf="assignTo == 'multiple'" appearance="outline" style="width: 100%;" class="mt-3 mb-2">
            <mat-label>Assigned to (multiple)</mat-label>
            <mat-select [formControl]="selectedValueMultiple" multiple (selectionChange)="updateAssignedValue()">
                <mat-option *ngFor="let emp of employees" [value]="emp.id">
                    {{ emp.name }}
                </mat-option>
            </mat-select>
        </mat-form-field>

        <!-- Title -->
        <mat-form-field appearance="outline" style="width: 100%;" class="mb-2">
            <mat-label>Title</mat-label>
            <input matInput name="title" [(ngModel)]="title" placeholder="Enter task title" required>
        </mat-form-field>

        <!-- description -->
        <mat-form-field appearance="outline" style="width: 100%;" class="mb-2">
            <mat-label>Description (optional)</mat-label>
            <textarea matInput name="description" [(ngModel)]="description" rows="3"
                placeholder="Type description here"></textarea>
        </mat-form-field>

        <!-- Date -->
        <mat-form-field appearance="outline" class="w-full mb-2">
            <mat-label>Deadline (optional)</mat-label>
            <input matInput [matDatepicker]="picker" [formControl]="deadline" placeholder="Select a date"
                name="deadline">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>

        <!-- Add Attachment -->
        <div class="mb-3 flex items-center">
            <input type="file" #fileInput
                accept="image/*,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
                style="display: none;" (change)="onFileSelected($event)">

            <button mat-raised-button color="primary" (click)="fileInput.click()" class="mr-3">
                <mat-icon svgIcon="mat:attach_file"></mat-icon>
                Add Attachment
            </button>

            <!-- Attachment Info -->
            <div *ngIf="attachmentName" class="flex items-center overflow-hidden">
                <span class="text-sm mr-2 truncate max-w-xs">{{ attachmentName }}</span>
                <button mat-icon-button color="warn" (click)="removeAttachment()">
                    <mat-icon svgIcon="mat:delete"></mat-icon>
                </button>
            </div>
        </div>

        <!-- Inline Checkbox: Require employee to accept documents -->
        <!-- <div class="flex items-center mb-2">
        <mat-checkbox [(ngModel)]="requireAttachment" name="requireAttachment" class="mr-2 text-sm" color="primary"><span class="font-bold text-sm" style="color: rgba(0, 0, 0, 0.6);">Require employee to accept documents</span></mat-checkbox>
        <mat-icon svgIcon="mat:help_outline" matTooltip="When enabled, this task can be completed only by attaching a document. This document will be linked to this task & also will appear under Documents."></mat-icon>
    </div> -->

        <!-- Inline Checkbox: Notify me by email when this task is completed -->
        <!-- <div class="flex items-center">
        <mat-checkbox [(ngModel)]="sendEmailNotification" name="sendEmailNotification" class="mr-2" color="primary"><span class="font-bold text-sm" style="color: rgba(0, 0, 0, 0.6);">Notify me by email when this task is completed</span></mat-checkbox>
    </div> -->

        <!-- Inline Checkbox: Notify employee by email -->
        <!-- <div class="flex items-center">
        <mat-checkbox [(ngModel)]="sendEmailNotificationEmployee" name="sendEmailNotificationEmployee" class="mr-2" color="primary"><span class="font-bold text-sm" style="color: rgba(0, 0, 0, 0.6);">Notify employee by email</span></mat-checkbox>
    </div>     -->

    </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
    <button mat-button type="button" (click)="onCancel()">Cancel</button>
    <button mat-raised-button type="button" color="primary" (click)="onSave()">Save</button>
</mat-dialog-actions>